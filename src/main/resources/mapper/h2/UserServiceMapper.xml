<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Mapperクラスとxmlのマッピング（パッケージ名も含める、アプリケーション名に注意！）-->
<mapper namespace="com.example.springbootsample.repository.UserMapper">
    <!-- mapping definition for user detail -->
    <resultMap type="com.example.springbootsample.domain.user.model.MUser" id="userMap">
        <id column="user_id" property="userId"/>
        <result column="password" property="password"/>
        <result column="user_name" property="userName"/>
        <result column="birthday" property="birthday"/>
        <result column="age" property="age"/>
        <result column="gender" property="gender"/>
        <result column="department_id" property="departmentId"/>
        <result column="role" property="role"/>
        <association property="department" resultMap="department"/>
        <collection property="salaryList" resultMap="salary" columnPrefix="salary_"/>
    </resultMap>  
    <!-- user registration -->
    <insert id="insertOne" resultMap="userMap">
        insert into m_user(
            user_id,
            password,
            user_name,
            birthday,
            age,
            gender,
            department_id,
            role)
        values(
            #{userId},
            #{password},
            #{userName},
            #{birthday},
            #{age},
            #{gender},
            #{departmentId},
            #{role})
    </insert>

    <!--ユーザー複数権取得-->
    <select id="findMay" resultType="MUser">
        select * from m_user
    </select>
</mapper>